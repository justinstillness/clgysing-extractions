================================================================================
DEVELOPMENT WISHLIST — SESSION 026 ADDENDUM (Part 2)
================================================================================
Date:      2026-02-12
Session:   026

================================================================================
NEW ENTRY — SECTION 2 (SeraphRecorder Pipeline)
================================================================================

W-023: Branch-Aware Extraction Routing
Priority:    P2
Status:      SCOPED (S026, from NLMINTA S018 Insight 3)

Description:
Enable automatic routing of extraction outputs to branch-specific folders
in the GitHub repo. Currently, all extractions from all branches/projects
land in a single _untagged/ folder with no way to distinguish origin
without manual inspection.

Problem context: 5+ active branches (AWSNBLM, NLMINTA, CLGYSING, etc.)
plus external testers all generate Majeston queries. Output volume now
~400+ files with no branch-level sorting.

Three implementation tiers:

Tier 1 (Process discipline — implementable now):
  Extend SERAPH signal format to include BRANCH field:
  [SERAPH: BRANCH=AWSNBLM, SESSION=026, PROJECT=clgysing, PASS=VX]
  extract.py already parses SERAPH tags. Add BRANCH to routing logic.
  Route to: _untagged/{BRANCH}/ or {BRANCH}/{PROJECT}/{PASS}/
  Discipline: Session bootstraps require SERAPH tag on all queries.
  Build estimate: <1 session (extract.py modification only)

Tier 2 (Session context registration — medium effort):
  New Chronicler tool: register_session(branch, session_number)
  Writes context file that extract.py reads for time-window matching.
  All extractions during active session inherit branch tag.
  Risk: Time-window overlap if multiple sessions run simultaneously.
  Build estimate: 1 session

Tier 3 (Proxy-level injection — highest effort, cleanest):
  Modify socat wrapper or build thin proxy that intercepts all Majeston
  calls and injects branch metadata into request before forwarding.
  Every tool call automatically carries branch tag.
  Build estimate: 2-3 sessions

Recommended path: Tier 1 first (zero infrastructure changes needed).
Evaluate Tier 2 if discipline proves insufficient. Tier 3 for when
external testers are active and can't be expected to follow tagging
protocol.

Relates to: NLMINTA S018 Insight 3, W-001 (File Routing), W-100 (Conductor)

================================================================================
ADDITIONAL NOTES
================================================================================

flush_pipeline CONFIRMED WORKING:
  Tested in fresh NLMINTA session (S018), 2026-02-12.
  154 + 15 entries processed across two days.
  83 successful extractions, 31 failures (ghost files written).
  94 files pushed to GitHub. Pipeline fully operational.

Retroactive file organization:
  ~400+ files in repo need branch-level sorting.
  Options: Caliper inventory → Claude-driven moves via Chronicler,
  or build auto-sort script reading file headers for SERAPH metadata.
  Connects to Insight 1 (project-specific automation tool calls).

================================================================================
END OF ADDENDUM (Part 2)
================================================================================